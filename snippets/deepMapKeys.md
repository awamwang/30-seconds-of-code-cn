---
title: deepMapKeys
tags: object,recursion,advanced
---

Deep maps an object's keys.

建立一个对象键列表的深度映射。（对对象中每个key都应用指定函数）

- Creates an object with the same values as the provided object and keys generated by running the provided function for each key.
- Use `Object.keys(obj)` to iterate over the object's keys.
- Use `Array.prototype.reduce()` to create a new object with the same values and mapped keys using `fn`.

用和给出的对象相同的值和对每个键应用给出的函数后的新键，创建一个对象。
使用`Object.keys(obj)`来遍历对象的键列表。
使用`Array.prototype.reduce()`来用相同的值和用`fn`映射后的键来创建一个新对象。

```js
const deepMapKeys = (obj, fn) =>
  Array.isArray(obj)
    ? obj.map(val => deepMapKeys(val, fn))
    : typeof obj === 'object'
    ? Object.keys(obj).reduce((acc, current) => {
        const key = fn(current);
        const val = obj[current];
        acc[key] = val !== null && typeof val === 'object' ? deepMapKeys(val, fn) : val;
        return acc;
      }, {})
    : obj;
```

```js
const obj = {
  foo: '1',
  nested: {
    child: {
      withArray: [
        {
          grandChild: ['hello']
        }
      ]
    }
  }
};
const upperKeysObj = deepMapKeys(obj, key => key.toUpperCase());
/*
{
  "FOO":"1",
  "NESTED":{
    "CHILD":{
      "WITHARRAY":[
        {
          "GRANDCHILD":[ 'hello' ]
        }
      ]
    }
  }
}
*/
```
